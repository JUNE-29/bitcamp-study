<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ex03</title>
</head>
<body>
<h1>함수 - 클로저(closure)를 객체에 담아 리턴하기</h1>
<script>
"use strict"


function createBox() { 
	var value;
 
	var box = new Object();
	
	// 클로저가 생성될 때 바깥 함수의 로컬 변수를 사용한다면
	// 자체적으로 그 값을 백업(복사)해놓는다. 로컬변수가 없어질 수도 있기때문에
	// 그리고 클로저 안에서 값은 같이 공유한다.
	
	// 그래서 box1의 주소 값과 box2의 주소 값이 다르다.
	
	box.setValue= function(v) {
		// 이 클로저가 사용하는 value 변수는 바깥 함수의 로컬 변수이기 때문에
		// 클로저 메모리로 복사해둔다.
		value = v;
	};
	
	box.getValue = function(a) {
		// 함수가 호출될 때 함께 생성된 클로저는 메모리를 공유한다.
		// 따라서 setValue()와 getValue()가 사용하는 value 변수는
		// 같은 변수이다.
		 return value;
	};
	
	return box;
}

var box1 = createBox();
var box2 = createBox();


box1.setValue(100);
box2.setValue(200);

console.log(box1.getValue());
console.log(box2.getValue());

</script>

</body>
</html>





